"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1594],{1594:(E,M,s)=>{s.r(M),s.d(M,{RegisterPageModule:()=>U});var P=s(8434),g=s(4341),a=s(3092),b=s(9262),c=s(467),e=s(1360),v=s(7291),F=s(7544),k=s(3165);let y=(()=>{var t;class u{constructor(n){this.http=n,this.apiUrl="http://192.168.1.13:3000"}registrarDueno(n){return this.http.post(`${this.apiUrl}/api/duenos`,n)}obtenerDuenos(){return this.http.get(`${this.apiUrl}/api/duenos`)}actualizarDueno(n,o){return this.http.put(`${this.apiUrl}/api/duenos/${n}`,o)}desactivarDueno(n){return this.http.put(`${this.apiUrl}/api/duenos/${n}/desactivar`,{})}activarDueno(n){return this.http.put(`${this.apiUrl}/api/duenos/${n}/activar`,{})}login(n,o){return this.http.post(`${this.apiUrl}/api/duenos/login`,{correo:n,password:o})}}return(t=u).\u0275fac=function(n){return new(n||t)(e.KVO(k.Qq))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),u})();const j=[{path:"",component:(()=>{var t;class u{constructor(n,o,i,r,h){this.storageService=n,this.router=o,this.apiService=i,this.loadingController=r,this.alertController=h,this.usuario={rut:"",nombre:"",apellido:"",correo:"",contrasena:"",confirmarContrasena:"",telefono:""}}presentLoading(){var n=this;return(0,c.A)(function*(){const o=yield n.loadingController.create({message:"Registrando...",spinner:"crescent"});return yield o.present(),o})()}presentAlert(n,o){var i=this;return(0,c.A)(function*(){yield(yield i.alertController.create({header:n,message:o,buttons:["OK"]})).present()})()}registrarUsuario(){var n=this;return(0,c.A)(function*(){const{rut:o,nombre:i,apellido:r,correo:h,contrasena:f,confirmarContrasena:R,telefono:O}=n.usuario;if(!(o&&i&&r&&h&&f&&R))return void n.presentAlert("Error","Completa todos los campos obligatorios");if(f!==R)return void n.presentAlert("Error","Las contrase\xf1as no coinciden");if(!n.validarRut(o))return void n.presentAlert("Error","Formato de RUT inv\xe1lido");const _=yield n.presentLoading(),p={rut:o.replace(/\./g,"").replace("-",""),nombre:i,apellido:r,email:h,telefono:O,password:f};var C;n.apiService.registrarDueno(p).subscribe({next:(C=(0,c.A)(function*(d){_.dismiss(),yield n.storageService.set("usuario_actual",{rut:p.rut,nombre:p.nombre,apellido:p.apellido,email:p.email}),n.presentAlert("\xc9xito","Usuario registrado correctamente"),n.router.navigateByUrl("/perfil")}),function(m){return C.apply(this,arguments)}),error:function(){var C=(0,c.A)(function*(d){_.dismiss();let m="Error al registrar usuario";409===d.status?m=d.error.error||"Este usuario ya existe":400===d.status&&(m=d.error.error||"Datos inv\xe1lidos"),n.presentAlert("Error",m)});return function(m){return C.apply(this,arguments)}}()})})()}validarRut(n){return/^[0-9]{1,2}(\.[0-9]{3}){0,2}-[0-9kK]$|^[0-9]{7,8}-[0-9kK]$/.test(n)}irABienvenido(){this.router.navigateByUrl("/bienvenida")}}return(t=u).\u0275fac=function(n){return new(n||t)(e.rXU(v.n),e.rXU(F.Ix),e.rXU(y),e.rXU(a.Xi),e.rXU(a.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],standalone:!1,decls:42,vars:7,consts:[[1,"ion-text-center"],["src","assets/img/Logo.jpeg","alt","Logo",1,"logo-barra"],[1,"ion-padding"],[3,"submit"],["position","floating"],["name","rut","required","",3,"ngModelChange","ngModel"],["slot","helper"],["name","nombre","required","",3,"ngModelChange","ngModel"],["name","apellido","required","",3,"ngModelChange","ngModel"],["name","correo","type","email","required","",3,"ngModelChange","ngModel"],["name","telefono","type","tel",3,"ngModelChange","ngModel"],["name","contrasena","type","password","required","",3,"ngModelChange","ngModel"],["name","confirmarContrasena","type","password","required","",3,"ngModelChange","ngModel"],[1,"ion-margin-top"],["expand","block","type","submit",1,"boton-login"],["fill","clear","size","small","expand","block",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e.nrm(3,"img",1),e.EFF(4," \u{1f43e} Registro "),e.k0s()()(),e.j41(5,"ion-content",2)(6,"form",3),e.bIt("submit",function(){return o.registrarUsuario()}),e.j41(7,"ion-item")(8,"ion-label",4),e.EFF(9,"RUT"),e.k0s(),e.j41(10,"ion-input",5),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.rut,r)||(o.usuario.rut=r),r}),e.k0s(),e.j41(11,"ion-note",6),e.EFF(12,"Formato: 12.345.678-9"),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",4),e.EFF(15,"Nombre"),e.k0s(),e.j41(16,"ion-input",7),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.nombre,r)||(o.usuario.nombre=r),r}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label",4),e.EFF(19,"Apellido"),e.k0s(),e.j41(20,"ion-input",8),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.apellido,r)||(o.usuario.apellido=r),r}),e.k0s()(),e.j41(21,"ion-item")(22,"ion-label",4),e.EFF(23,"Correo"),e.k0s(),e.j41(24,"ion-input",9),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.correo,r)||(o.usuario.correo=r),r}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label",4),e.EFF(27,"Tel\xe9fono (opcional)"),e.k0s(),e.j41(28,"ion-input",10),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.telefono,r)||(o.usuario.telefono=r),r}),e.k0s()(),e.j41(29,"ion-item")(30,"ion-label",4),e.EFF(31,"Contrase\xf1a"),e.k0s(),e.j41(32,"ion-input",11),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.contrasena,r)||(o.usuario.contrasena=r),r}),e.k0s()(),e.j41(33,"ion-item")(34,"ion-label",4),e.EFF(35,"Confirmar Contrase\xf1a"),e.k0s(),e.j41(36,"ion-input",12),e.mxI("ngModelChange",function(r){return e.DH7(o.usuario.confirmarContrasena,r)||(o.usuario.confirmarContrasena=r),r}),e.k0s()(),e.j41(37,"div",13)(38,"ion-button",14),e.EFF(39," \u{1f436} Registrarse "),e.k0s(),e.j41(40,"ion-button",15),e.bIt("click",function(){return o.irABienvenido()}),e.EFF(41," \u2b05\ufe0f Volver a Inicio "),e.k0s()()()()),2&n&&(e.R7$(10),e.R50("ngModel",o.usuario.rut),e.R7$(6),e.R50("ngModel",o.usuario.nombre),e.R7$(4),e.R50("ngModel",o.usuario.apellido),e.R7$(4),e.R50("ngModel",o.usuario.correo),e.R7$(4),e.R50("ngModel",o.usuario.telefono),e.R7$(4),e.R50("ngModel",o.usuario.contrasena),e.R7$(4),e.R50("ngModel",o.usuario.confirmarContrasena))},dependencies:[g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,a.Jm,a.W9,a.eU,a.$w,a.uz,a.he,a.JI,a.BC,a.ai,a.Gw],styles:['@charset "UTF-8";ion-header[_ngcontent-%COMP%]{--background: #5e35b1}ion-toolbar[_ngcontent-%COMP%]{--background: #5e35b1;--color: white}ion-title[_ngcontent-%COMP%]{color:#fff}ion-content[_ngcontent-%COMP%]{--background: #d8a7f6}ion-button[_ngcontent-%COMP%]{--background: #5e35b1;--color: white}ion-toolbar[_ngcontent-%COMP%]{--background: #6a1b9a}.titulo-bienvenida[_ngcontent-%COMP%]{color:#fff}.bienvenida-titulo[_ngcontent-%COMP%]{font-size:1.8rem;color:#fff;font-weight:700;margin-top:20px}ion-button[_ngcontent-%COMP%]{--background: #6a1b9a;--color: white;--border-radius: 10px;margin-top:15px}ion-button[_ngcontent-%COMP%]:hover{--background: #9c4dcc}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}ion-content[_ngcontent-%COMP%]{color:#fff}.boton-login[_ngcontent-%COMP%]{--border-radius: 20px;--height: 40px;padding-left:15px;padding-right:15px;font-size:14px;margin:10px auto;--background: #28a745;--color: white;--padding-top: 0;--padding-bottom: 0}ion-item[_ngcontent-%COMP%]{--border-radius: 20px}ion-input[_ngcontent-%COMP%]{--border-radius: 20px;--box-shadow: none}ion-item[_ngcontent-%COMP%] + ion-item[_ngcontent-%COMP%]{margin-top:10px}.logo-barra[_ngcontent-%COMP%]{height:30px;margin-right:10px;vertical-align:middle}']}),u})()}];let D=(()=>{var t;class u{}return(t=u).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[b.iI.forChild(j),b.iI]}),u})(),U=(()=>{var t;class u{}return(t=u).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[P.MD,g.YN,a.bv,D]}),u})()}}]);